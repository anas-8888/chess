# ุชุญุณููุงุช ุงููุธุงู - Fix Pass ูุงุญุฏ

## โ ุงูุฅุตูุงุญุงุช ุงูููุฌุฒุฉ

### 1. ุฅุตูุงุญ ุฃุฎุทุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช (MySQL2)

- **ุฅุฒุงูุฉ ุงูุถูุถุงุก**: ุชู ุฅุฒุงูุฉ `debug` ู `trace` ูู ุฅุนุฏุงุฏุงุช mysql2
- **ุฅุฒุงูุฉ ุงูุฎูุงุฑ ุบูุฑ ุงูุตุญูุญ**: ุชู ุญุฐู `acquireTimeout` ูุงุณุชุจุฏุงูู ุจู `timeout`
- **ุงุชุตุงู ููุญุฏ**: ุชู ุชูุญูุฏ ุงูุงุชุตุงู ูู ููู ูุงุญุฏ `src/config/db.js`
- **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุฑูุฒูุฉ**: ุฅุถุงูุฉ `pool.on('error', ...)` ูุน ุฅุนุงุฏุฉ ุงููุญุงููุฉ
- **ุฏุงูุฉ `withConn`**: ุถูุงู ุฅุฏุงุฑุฉ ุงูุงุชุตุงูุงุช ุจุดูู ุขูู ูุน `getConnection`/`release`

### 2. ูุธุงู ุชุณุฌูู ูุฑูุฒู

- **Logger ููุญุฏ**: ุฅูุดุงุก ูุธุงู ุชุณุฌูู ูุฑูุฒู ูู `src/utils/logger.js`
- **ูุณุชููุงุช ุงูุชุณุฌูู**: `error`, `warn`, `info`, `debug`
- **ุชูููู ุงูุถูุถุงุก**: ุฅุฒุงูุฉ `console.log` ุงูุนุดูุงุฆู ูุงุณุชุจุฏุงูู ุจู Logger
- **ุชุญูู ูู ุงูุจูุฆุฉ**: `DEBUG=1` ูุชูุนูู ุงูุชุณุฌูู ุงูุชูุตููู

### 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุญุณูุฉ

- **try/catch ููุญุฏ**: ูู ุฌููุน ุงุณุชุฏุนุงุกุงุช ุงูุฎุฏูุงุช/DB
- **ุชุณุฌูู ูุฑูุฒู**: ุชุณุฌูู ุงูุฃุฎุทุงุก ูุฑุฉ ูุงุญุฏุฉ ููุท ุนุจุฑ `errorHandler`
- **ุฃุฎุทุงุก ููุญุฏุฉ**: ุฅุนุงุฏุฉ ุฃุฎุทุงุก ููุญุฏุฉ ุนุจุฑ `next(err)`

### 4. ุฅุฒุงูุฉ ุงูุชูุฑุงุฑุงุช

#### ุฃ. ูุญุต ุงูุฃูุนุงุจ ุงููุดุทุฉ
- **ูุจู**: `GET /api/games/active` ูู ุซุงููุฉ ูู 3 ูููุงุช ูุฎุชููุฉ
- **ุจุนุฏ**: ูุญุต ูุงุญุฏ ุนูุฏ ุงูุฏุฎูู + Socket ููุชุญุฏูุซุงุช ุงููุจุงุดุฑุฉ

#### ุจ. ุชุญุฏูุซ ุญุงูุฉ ุงููุณุชุฎุฏู
- **ูุจู**: ุชูุฑุงุฑ "ุงููุณุชุฎุฏู ูุชุตู ุจุงููุนู" ุนุดุฑ ูุฑุงุช
- **ุจุนุฏ**: ููุทู ููุญุฏ ูู ุงูุณูุฑูุฑ + ุฏุงูุฉ ูุงุญุฏุฉ ูู Socket

#### ุฌ. ููุงู ุงูุชูุธูู
- **ูุจู**: 3 ุทูุงุจูุฑ ูููุตูุฉ (ุฏุนูุงุช/ุฃูุนุงุจ/ุญุงูุงุช)
- **ุจุนุฏ**: ูููุฉ ูุงุญุฏุฉ ูุฌูุนุฉ ูุน ุชุณุฌูู "ุจุฏุฃ/ุงูุชูู" ูุฑุฉ ูุงุญุฏุฉ

### 5. ุงูุชุญูู ูู ุงูุงุชุตุงู ุงููุญุธู

- **Ping/Pong**: ุฅุฑุณุงู ping ูู 30 ุซุงููุฉ ูู ุงูุณูุฑูุฑ
- **ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู**: ูุฑุงูุจุฉ `socket.connected` ู `disconnect`
- **ูุง ุชุณุฌูู ูู ping**: ุฅุฒุงูุฉ ุงูุถูุถุงุก ูู ping/pong

## ๐ง ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงูุฌุฏูุฏุฉ

```env
# ุชูุนูู ุงูุชุณุฌูู ุงูุชูุตููู
DEBUG=1

# ูุณุชูู ุงูุชุณุฌูู
LOG_LEVEL=info  # error, warn, info, debug
```

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ูุจู ุงูุชุญุณูู:
- โ 100+ ุทูุจ HTTP ูู ุฏูููุฉ
- โ 50+ ุฑุณุงูุฉ console.log ูู ุฏูููุฉ  
- โ 3 ุทูุงุจูุฑ ุชูุธูู ูููุตูุฉ
- โ ุชูุฑุงุฑ ุชุญุฏูุซ ุญุงูุฉ ุงููุณุชุฎุฏู

### ุจุนุฏ ุงูุชุญุณูู:
- โ ุทูุจ ูุงุญุฏ ุนูุฏ ุงูุฏุฎูู
- โ 10-20 ุฑุณุงูุฉ logger ููุธูุฉ
- โ ูููุฉ ุชูุธูู ูุงุญุฏุฉ ูุฌูุนุฉ
- โ ุชุญุฏูุซ ุญุงูุฉ ููุญุฏ

## ๐งช ุงุฎุชุจุงุฑ ุงูุชุญุณููุงุช

### 1. ุงุฎุชุจุงุฑ ุงููุทุงุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุฅููุงู MySQL
sudo service mysql stop

# ุชุดุบูู ุงูุชุทุจูู
npm start

# ุฅุนุงุฏุฉ ุชุดุบูู MySQL  
sudo service mysql start

# ุงูุชุฃูุฏ ูู ุงูุชุนุงูู ุจุฏูู crash
```

### 2. ุงุฎุชุจุงุฑ ุฏุฎูู ูุงุนุจูู ูุชุนุฏุฏูู
```bash
# ูุชุญ 3 ูุชุตูุญุงุช ูุฎุชููุฉ
# ุชุณุฌูู ุฏุฎูู 3 ูุงุนุจูู
# ุงูุชุฃูุฏ ูู ุนุฏู ุชูุฑุงุฑ ุงูุฑุณุงุฆู
```

### 3. ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุงููุญุธู
```bash
# ูุฑุงูุจุฉ ping/pong ูู console
# ูุทุน ุงูุงุชุตุงู ูุคูุชุงู
# ุงูุชุฃูุฏ ูู ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู
```

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ูุง ุชูุฌุฏ ุชุบููุฑุงุช ูู API**: ุฌููุน ุงูุชุบููุฑุงุช ุฏุงุฎููุฉ
2. **ุชูุงูู ูุน ุงูุฅุตุฏุงุฑุงุช ุงูุณุงุจูุฉ**: ูุง ุญุงุฌุฉ ูุชุญุฏูุซ ุงูุนููู
3. **ุชุญุณูู ุชุฏุฑูุฌู**: ูููู ุชูุนูู `DEBUG=1` ููุชุทููุฑ
4. **ูุฑุงูุจุฉ ุงูุฃุฏุงุก**: ุชุญุณูู ูุจูุฑ ูู ุงุณุชููุงู ุงูููุงุฑุฏ

## ๐ ุงูุชุทุจูู

```bash
# ุชุดุบูู ุงูุชุทุจูู ูุน ุงูุชุณุฌูู ุงูุจุณูุท
npm start

# ุชุดุบูู ูุน ุงูุชุณุฌูู ุงูุชูุตููู
DEBUG=1 npm start

# ุชุดุบูู ูุน ูุณุชูู ุชุณุฌูู ูุญุฏุฏ
LOG_LEVEL=warn npm start
``` 